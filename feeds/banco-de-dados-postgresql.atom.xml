<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Jesue Junior - Banco de Dados, PostgreSQL</title><link href="/" rel="alternate"></link><link href="/feeds/banco-de-dados-postgresql.atom.xml" rel="self"></link><id>/</id><updated>2012-07-06T22:19:00-03:00</updated><entry><title>Ativando conexões remotas ao PostgreSQL</title><link href="/ativando-conexoes-remotas-postgresql" rel="alternate"></link><published>2012-07-06T22:19:00-03:00</published><updated>2012-07-06T22:19:00-03:00</updated><author><name>jesuejunior</name></author><id>tag:None,2012-07-06:/ativando-conexoes-remotas-postgresql</id><summary type="html">&lt;p&gt;Neste tópico vou &lt;em&gt;tentar&lt;/em&gt; explicar como liberar&amp;nbsp;conexões&amp;nbsp;remotas pela rede a uma base de dados PostgreSQL&amp;nbsp;(9.1).&lt;/p&gt;
&lt;p&gt;Por padrão o PostgreSQL vem configurado para receber apenas conexões locais (localhost ou 127.0.0.1). Para conectar de outra máquina
na&amp;nbsp;rede&amp;nbsp;é preciso alterar algumas configurações básicas em …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Neste tópico vou &lt;em&gt;tentar&lt;/em&gt; explicar como liberar&amp;nbsp;conexões&amp;nbsp;remotas pela rede a uma base de dados PostgreSQL&amp;nbsp;(9.1).&lt;/p&gt;
&lt;p&gt;Por padrão o PostgreSQL vem configurado para receber apenas conexões locais (localhost ou 127.0.0.1). Para conectar de outra máquina
na&amp;nbsp;rede&amp;nbsp;é preciso alterar algumas configurações básicas em 2&amp;nbsp;arquivos.&lt;/p&gt;
&lt;p&gt;(Linux)&lt;/p&gt;
&lt;p&gt;São eles:&amp;nbsp; &lt;strong&gt;postgresql.conf&lt;/strong&gt;&amp;nbsp;e&amp;nbsp;&lt;strong&gt;pg_hba.conf&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;No&amp;nbsp; &lt;strong&gt;postgresql.conf&lt;/strong&gt;&amp;nbsp;vamos editar a seguinte&amp;nbsp;linha:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#listen_addresses = ‘localhost’ # what IP address(es) to listen on&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Como em todo arquivo de configuração em programas linux, o # na frente
da linha significa um comentário e com isso desabilita o parâmetro
seguinte, tomando seu valor default, que no caso é localhost. Descomente
essa linha e substitua seu valor por *. Assim seu PostgreSQL estará
apto a ouvir conexões de qualquer &lt;span class="caps"&gt;IP&lt;/span&gt;.Então essa linha ficará da seguinte&amp;nbsp;forma:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;listen_addresses&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;# what IP address(es) to listen on&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Isso não quer dizer que ele estará aberto para qualquer &lt;span class="caps"&gt;IP&lt;/span&gt; da rede. É
possível criar políticas de&amp;nbsp;acesso&amp;nbsp;através de outro arquivo que
falaremos a&amp;nbsp;seguir.&lt;/p&gt;
&lt;p&gt;Liberando as conexões no arquivo&amp;nbsp;&lt;strong&gt;pg_hba.conf&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;Este é o arquivo do Postgres responsável pela liberação de usuários,
hosts e bancos de dados. Nele é possível dizer qual usuário de qual ip
(ou rede) conectará a qual banco. É possível liberar qualquer usuário
para conectar a qualquer banco, mas esta é uma regra cautelosa a ser
seguida pois pode comprometer a segurança do seu&amp;nbsp;servidor&amp;nbsp;de bases de&amp;nbsp;dados.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Por padrão o arquivo vem com a seguinte&amp;nbsp;configuração:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#“local” is for Unix domain socket connections only&lt;/span&gt;
&lt;span class="nb"&gt;local&lt;/span&gt; all all trust
&lt;span class="c1"&gt;# IPv4 local connections:&lt;/span&gt;
host all all &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1/32 trust
&lt;span class="c1"&gt;# IPv6 local connections:&lt;/span&gt;
host all all ::1/128 trust
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pode haver alguma variação das configurações padrões de acordo com a
versão utilizada, mas geralmente é algo que represente essas
informações. Basicamente elas querem dizer que todas as conexões locais
podem ser realizadas por qualquer usuário do banco a qualquer banco de&amp;nbsp;dados.&lt;/p&gt;
&lt;p&gt;Para liberar o acesso remoto basta criar uma nova regra seguindo o
seguinte&amp;nbsp;padrão:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host all all &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0/0 trust
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com essa regra qualquer usuário de qualquer &lt;span class="caps"&gt;IP&lt;/span&gt; poderá se conectar a
qualquer&amp;nbsp;database.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Importante&lt;/strong&gt;: O parâmetro trust quer dizer que não será solicitada
qualquer senha para conectar ao banco de dados. Então, qualquer pessoa
com acesso à sua rede poderá se conectar ao servidor PostgreSQL sem
nenhuma restrição. Se a sua rede for restrita como uma turma de um curso
ou um ambiente de desenvolvimento interno de empresa não há riscos,
porém, é necessário possuir um ambiente de rede interno&amp;nbsp;isolado.&lt;/p&gt;
&lt;p&gt;Este parâmetro é útil quando você ainda não se conectou ao banco para
criar uma senha de acesso ao usuário postgres (do banco e não do sistema
operacional). Então você se conecta e reseta a senha do usuário. Logo em
seguida, altere o parâmetro para md5. Assim, uma senha será solicitada
ao tentar conectar-se ao servidor&amp;nbsp;Postgre.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Assim ficará a regra de&amp;nbsp;liberação:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host all all &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0/0 md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;É possível também liberar o acesso apenas a uma rede&amp;nbsp;específica:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host all all &lt;span class="m"&gt;192&lt;/span&gt;.168.0.0/32 md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Ou também, informar qual usuário poderá&amp;nbsp;conectar:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host all usuariodobanco &lt;span class="m"&gt;192&lt;/span&gt;.168.0.0/32 md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Também informar qual o banco de dados a ser conectar por este&amp;nbsp;usuário:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host db userdb &lt;span class="m"&gt;192&lt;/span&gt;.168.0.0/32 md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Na regra acima, o usuário&amp;nbsp;&lt;em&gt;userdb&lt;/em&gt; do banco &amp;nbsp;poderá conectar-se apenas
ao banco db apenas se estiver dentro da rede&amp;nbsp;192.168.0.0.&lt;/p&gt;
&lt;p&gt;Essa é a dica, precisei muito disso e quebrei a cabeça um pouco então
fica guardado agora, espero que possa&amp;nbsp;ajudar&amp;nbsp;alguém.&lt;/p&gt;
</content><category term="PostgreSQL"></category></entry></feed>