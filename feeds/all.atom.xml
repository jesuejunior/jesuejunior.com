<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Jesue Junior</title><link href="jesuejunior.com/" rel="alternate"></link><link href="jesuejunior.com/feeds/all.atom.xml" rel="self"></link><id>jesuejunior.com/</id><updated>2016-12-12T00:00:00-02:00</updated><entry><title>Migrando Django app para o heroku (Tips and Tricks)</title><link href="jesuejunior.com/deploy-app-into-heroku-the-good-way" rel="alternate"></link><published>2016-12-12T00:00:00-02:00</published><updated>2016-12-12T00:00:00-02:00</updated><author><name>jesuejunior</name></author><id>tag:None,2016-12-12:jesuejunior.com/deploy-app-into-heroku-the-good-way</id><summary type="html">&lt;div class="section" id="cenario"&gt;
&lt;h2&gt;Cenário&lt;/h2&gt;
&lt;p&gt;Faz um bom tempo que tenho alguns servidores na &lt;a class="reference external" href="http://www.digitalocean.com"&gt;Digital Ocean&lt;/a&gt; , tenho um em específico que está
com pouco mais de 1 ano de uptime com alguns serviços(sites, blogs e webapps) meus e de clientes, com
docker e sem docker.&amp;nbsp;:)&lt;/p&gt;
&lt;p&gt;Percebi que tinham algumas apps nesse servidor que …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;div class="section" id="cenario"&gt;
&lt;h2&gt;Cenário&lt;/h2&gt;
&lt;p&gt;Faz um bom tempo que tenho alguns servidores na &lt;a class="reference external" href="http://www.digitalocean.com"&gt;Digital Ocean&lt;/a&gt; , tenho um em específico que está
com pouco mais de 1 ano de uptime com alguns serviços(sites, blogs e webapps) meus e de clientes, com
docker e sem docker.&amp;nbsp;:)&lt;/p&gt;
&lt;p&gt;Percebi que tinham algumas apps nesse servidor que eu poderia migrar para um serviço &lt;em&gt;gratuito&lt;/em&gt;
ou até mesmo desligar. Um forte candidato para as migrações seria o heroku, &lt;span class="caps"&gt;AWS&lt;/span&gt; Free Tier ou &lt;span class="caps"&gt;GCP&lt;/span&gt; Free.
Eu já havia trabalhado há um tempo atrás com o heroku e sabia que seria bem simples fazer essa migração,
pois as minhas aplicações já eram baseadas no &lt;a class="reference external" href="https://12factor.net"&gt;12factor&lt;/a&gt;, então seria tranquilo e
diferente do &lt;span class="caps"&gt;AWS&lt;/span&gt; Free Tier ou &lt;span class="caps"&gt;GCP&lt;/span&gt; Free Tier, a aplicação ficará ativa sem cobranças mesmo depois de 1 ano.&amp;nbsp;:)&lt;/p&gt;
&lt;p&gt;O droplet&amp;nbsp;escolhido.&lt;/p&gt;
&lt;p&gt;&lt;img alt="image0" class="align-middle" src="/img/heroku/do-panel-11m.png" /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="a-aplicacao"&gt;
&lt;h2&gt;A&amp;nbsp;Aplicação&lt;/h2&gt;
&lt;p&gt;Está aplicação web que desenvolvi para um amigo é basicamente um registro de blocos de granito
para exportações, bem simples, vincula uma identificação de nota fiscal ao código gerado para
o bloco a ser exportado. Uma Aplicação muito simples usando Django, PostgreSQL e&amp;nbsp;Bootstrap.&lt;/p&gt;
&lt;p&gt;Algumas telas responsivas para utilizar via&amp;nbsp;celular.&lt;/p&gt;
&lt;p&gt;&lt;img alt="image2" class="align-middle" src="/img/heroku/stone_app.png" /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="o-deploy"&gt;
&lt;h2&gt;O&amp;nbsp;deploy&lt;/h2&gt;
&lt;p&gt;Construí um docker-compose.yml que tem todas as configurações necessárias e o provisionamento da
instância é executado via ansible, onde é instalado o Docker Engine e algumas configurações&amp;nbsp;adicionais.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;docker-compose.yml&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;stone&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;jesuejunior/stone&lt;/span&gt;
&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;MEMCACHED_HOST&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;memcached&lt;/span&gt;
    &lt;span class="nt"&gt;DATABASE_HOST&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;postgres&lt;/span&gt;
&lt;span class="nt"&gt;env_file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;stone.env&lt;/span&gt;
&lt;span class="nt"&gt;links&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;memcached:memcached&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;postgres:postgres&lt;/span&gt;

&lt;span class="nt"&gt;nginx&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;jesuejunior/nginx:latest&lt;/span&gt;
&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;80:80&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;expose&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;80&lt;/span&gt;
&lt;span class="nt"&gt;links&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;stone:app&lt;/span&gt;
&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;/stone/static/collect:/app/static:rw&lt;/span&gt;

&lt;span class="nt"&gt;postgres&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;postgres:9&lt;/span&gt;
&lt;span class="nt"&gt;env_file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;stone.env&lt;/span&gt;
&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;5432:5432&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;/opt/postgresql/data:/var/lib/postgresql/data:rw&lt;/span&gt;

&lt;span class="nt"&gt;memcached&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;memcached&lt;/span&gt;
&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;11211:11211&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;expose&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;11211&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="resultado"&gt;
&lt;h3&gt;Resultado&lt;/h3&gt;
&lt;p&gt;&lt;img alt="image1" class="align-middle" src="/img/heroku/docker-compose-do.png" /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="porque-heroku"&gt;
&lt;h2&gt;Porque&amp;nbsp;Heroku?&lt;/h2&gt;
&lt;p&gt;Heroku é uma plataforma bastante madura que chegou apenas para resolver um problema específico,
conseguir fazer deploy de aplicações Ruby de forma simples e permiti-las escalar de forma&amp;nbsp;simples.&lt;/p&gt;
&lt;p&gt;Mas a plataforma evoluiu muito! Para saber mais como funciona hoje recomendo a leitura de &lt;a href="https://devcenter.heroku.com/articles/how-heroku-works" target="_blank"&gt; How Heroku Works &lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Com a constante criação e evolução de startups muito pequenas que muitas vezes têm apenas 1
desenvolverdor, a velocidade e simplicidade do Heroku se mostra a frente de um leve custo
adicional.
Se você precisa fazer um deploy para demonstrar algo novo, ou se você não quer perder tempo configurando
a infraestrutura, eliminar a necessidade de equipe de&amp;nbsp;infraestrututra.&lt;/p&gt;
&lt;p&gt;É possivel fazer a maioria das ações via web, acompanhar sua aplicação com métricas, logs e etc.
A facilidade para conseguir fazer um deploy e/ou escalar uma aplicação ou um banco de dados, é
surpreendente, alguns detalhes mudaram bastante, como a forma de &lt;em&gt;ligar&lt;/em&gt; a aplicação ao banco de
dados(&lt;span class="caps"&gt;PGSQL&lt;/span&gt;) ou ao&amp;nbsp;cache(Redis).&lt;/p&gt;
&lt;p&gt;A plataforma é executada dentro sobre a &lt;span class="caps"&gt;AWS&lt;/span&gt; e você acaba pagando alguns centavos a mais pela
comodidade, nada mais justo,&amp;nbsp;certo?&lt;/p&gt;
&lt;p&gt;Então você pode criar sua conta sem precisar adicionar o cartão de crédito diretamente no site do
&lt;a class="reference external" href="https://www.heroku.com/"&gt;heroku&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Vamos por a mão na&amp;nbsp;massa!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="instalando-o-heroku-toolbelt"&gt;
&lt;h2&gt;Instalando o heroku&amp;nbsp;toolbelt&lt;/h2&gt;
&lt;p&gt;O que é o &lt;a class="reference external" href="https://devcenter.heroku.com/articles/heroku-cli"&gt;toolbelt&lt;/a&gt;&amp;nbsp;?&lt;/p&gt;
&lt;p&gt;Simples, é o gerenciador do heroku via command-line, com ele você conseguirá gerenciar toda a suas
aplicações, serviços e opções que podem ou não estar disponíveis na versão web, de forma que com o
&lt;span class="caps"&gt;CLI&lt;/span&gt; você consegue automatizar tarefas de deploy, auto-scaling e&amp;nbsp;etc.&lt;/p&gt;
&lt;p&gt;Instalar no macOS é tão simples quanto no linux se você usa o &lt;em&gt;brew&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; brew install heroku
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E pronto! Agora é só efetuar o login com sua conta previamente criada e seguir o&amp;nbsp;step-by-step.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; heroku login
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="escolher-a-versao-do-python"&gt;
&lt;h2&gt;Escolher a versão do&amp;nbsp;python&lt;/h2&gt;
&lt;p&gt;O Heroku tem disponibilidade em usar as duas versões do Python, que são 2 e&amp;nbsp;3.&lt;/p&gt;
&lt;p&gt;Para definir a versão é necessário adicionar o arquivo &lt;em&gt;runtime.txt&lt;/em&gt; com o seguinte conteúdo e
no mesmo diretório que seu &lt;em&gt;Procfile&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; cat runtime.txt
python-3.6.1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Por default o Heroku assume o python 2, mas se quiser usar  Python 3 basta trocar a versão no
arquivo &lt;em&gt;runtime.txt&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="configurar-as-variaveis-de-ambiente"&gt;
&lt;h2&gt;Configurar as variaveis de&amp;nbsp;ambiente&lt;/h2&gt;
&lt;p&gt;Conforme mostrado no docker-compose eu já tinha um arquivo de variáveis de ambiente. Então via
terminal consegui configurar com o seguinte&amp;nbsp;comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat stone.env &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print}&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;ORS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; xargs heroku config:set
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h3&gt;Resultado&lt;/h3&gt;
&lt;p&gt;&lt;img alt="image3" class="align-middle" src="/img/heroku/config-env.png" /&gt;&lt;/p&gt;
&lt;p&gt;Mas se você preferir, existe a possibilidade de ser configurado via painel conforme imagem acima.
E ao executar uma alteração via painel imediatamente será refletida na sua&amp;nbsp;aplicação.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="fazendo-o-sync-do-banco"&gt;
&lt;h2&gt;Fazendo o sync do&amp;nbsp;banco&lt;/h2&gt;
&lt;p&gt;Essa parte eu fiz um pouco diferente, mas gostaria de deixar a dica para casos que precisamos
colocar a aplicação do zero e executar o primeiro &lt;em&gt;migrate&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Como sabemos o &lt;em&gt;Django&lt;/em&gt; tem uma &lt;em&gt;feature&lt;/em&gt; de migração de banco de dados muito precisa e concisa,
sempre que mudamos nosso &lt;em&gt;model&lt;/em&gt;, precisamos gerar o que chamamos de &lt;em&gt;migration&lt;/em&gt;, dessa forma
faremos nosso banco de dados refletir as novas alterações que&amp;nbsp;precisamos.&lt;/p&gt;
&lt;p&gt;No meu caso como tenho apenas uma aplicação, não precisei passar o nome como parâmetro, ou seja, o
comando a ser executado é o&amp;nbsp;seguinte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ heroku run python manage.py syncdb
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Running python manage.py syncdb on ⬢ stoneblock... up, run.7008 &lt;span class="o"&gt;(&lt;/span&gt;Free&lt;span class="o"&gt;)&lt;/span&gt;
...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E pronto, suas tabelas e colunas estão criadas de acordo com sua&amp;nbsp;aplicação.&lt;/p&gt;
&lt;p&gt;Nota: &lt;em&gt;No meu caso eu simplesmente fiz dump e restore, falo um pouco de como conectar no PostgreSQL do
Heroku a partir do computador local final deste&amp;nbsp;post.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Agora vamos criar um superuser&amp;nbsp;inicial.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;You have installed Django&lt;span class="s1"&gt;&amp;#39;s auth system, and don&amp;#39;&lt;/span&gt;t have any superusers defined.
Would you like to create one now? &lt;span class="o"&gt;(&lt;/span&gt;yes/no&lt;span class="o"&gt;)&lt;/span&gt;: yes
Username &lt;span class="o"&gt;(&lt;/span&gt;leave blank to use &lt;span class="s1"&gt;&amp;#39;u13302&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;: joaozinho
Email address: stone@gmail.com
Password:
Password &lt;span class="o"&gt;(&lt;/span&gt;again&lt;span class="o"&gt;)&lt;/span&gt;:
Superuser created successfully.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;É muito simples, não muda muito de quando se está trabalhando localmente e é isso que&amp;nbsp;impresiona.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="adicionando-dominio-customizado"&gt;
&lt;h2&gt;Adicionando domínio&amp;nbsp;customizado.&lt;/h2&gt;
&lt;p&gt;Claro que queremos uma url própria! Mas nesse ponto o Heroku exige que configuremos o cartão de
crédito, então entramos no painel e adicionamos o cartão, eles vão verificar se o cartão é valido
cobrando $1, mas pode ficar tranquilo, pois eles estornam o valor.&amp;nbsp;:D&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; heroku &lt;span class="nb"&gt;help&lt;/span&gt; domains:add
Usage: heroku domains:add HOSTNAME

add domain to an app

-a, --app APP       &lt;span class="c1"&gt;# app to run command against&lt;/span&gt;
-r, --remote REMOTE &lt;span class="c1"&gt;# git remote of app to run command against&lt;/span&gt;
--wait
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A mensagem é igual tanto no terminal quanto via web, não tem para onde&amp;nbsp;correr.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; heroku domains:add stone.sixcodes.com
Adding stone.sixcodes.com to ⬢ stoneblock... !
▸    Please verify your account in order to add domains &lt;span class="o"&gt;(&lt;/span&gt;please enter a credit card&lt;span class="o"&gt;)&lt;/span&gt; For more information,
see https://devcenter.heroku.com/categories/billing Verify now at https://heroku.com/verify
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aqui você pode visualizar quando eles exigem &lt;a href="https://devcenter.heroku.com/articles/account-verification#when-is-verification-required" target="_blank"&gt; cartão de crédito &lt;/a&gt;.
Após adicionar o cartão de&amp;nbsp;crédito&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; heroku domains:add stone.sixcodes.com
Adding stone.sixcodes.com to ⬢ stoneblock... &lt;span class="k"&gt;done&lt;/span&gt;
▸    Configure your app&lt;span class="s1"&gt;&amp;#39;s DNS provider to point to the DNS Target stone.sixcodes.com.herokudns.com.&lt;/span&gt;
&lt;span class="s1"&gt;▸    For help, see https://devcenter.heroku.com/articles/custom-domains&lt;/span&gt;

&lt;span class="s1"&gt;The domain stone.sixcodes.com has been enqueued for addition&lt;/span&gt;
&lt;span class="s1"&gt;▸    Run heroku domains:wait &amp;#39;&lt;/span&gt;stone.sixcodes.com&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; to &lt;span class="nb"&gt;wait&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; completion
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E então seu domínio estará&amp;nbsp;pronto&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; heroku domains:wait stone.sixcodes.com                                                                                                                                          master &lt;span class="o"&gt;[&lt;/span&gt;+       &lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;9c9eb1e&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;!&lt;span class="o"&gt;)&lt;/span&gt;
Waiting &lt;span class="k"&gt;for&lt;/span&gt; stone.sixcodes.com... &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="conectando-no-postgresql-de-fora-do-heroku"&gt;
&lt;h2&gt;Conectando no PostgreSQL de fora do&amp;nbsp;Heroku&lt;/h2&gt;
&lt;p&gt;Como havia falado anteriormente, precisei acessar o PostgreSQL diretamente do meu notebook, eis
que temos uma parte chata que ninguém te conta. Para conseguir conectar no PostgreSQL(heroku),
você precisa adicionar a seguinte querystring a sua string de conexão, desta forma permitindo a&amp;nbsp;conexão:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;?ssl&lt;span class="o"&gt;=&lt;/span&gt;true&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nv"&gt;sslfactory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;org.postgresql.ssl.NonValidatingFactory
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Bom é isso que gostaria de compartilhar. Dúvidas e sugestões, estou a&amp;nbsp;disposição.&lt;/p&gt;
&lt;/div&gt;
</content><category term="Heroku"></category><category term="Django"></category><category term="Web"></category><category term="DevOps"></category><category term="PostgreSQL"></category><category term="Deploy"></category></entry><entry><title>Aprendendo a criar e gerenciar usuários no PostgreSQL (Primeiros Passos)</title><link href="jesuejunior.com/aprendendo-gerenciar-usuarios-postgres" rel="alternate"></link><published>2012-10-12T21:04:00-03:00</published><updated>2012-10-12T21:04:00-03:00</updated><author><name>jesuejunior</name></author><id>tag:None,2012-10-12:jesuejunior.com/aprendendo-gerenciar-usuarios-postgres</id><summary type="html">&lt;p&gt;Confesso que logo de cara quando comecei a usar &lt;span class="caps"&gt;PSQL&lt;/span&gt; fiquei
meio perdido (usava MySQL), então estou escrevendo essa dica para eu&amp;nbsp;relembrar.&lt;/p&gt;
&lt;p&gt;Criando seu 1° super usuário no PostgreSQL.
Depois de instalado seu &lt;span class="caps"&gt;SGBD&lt;/span&gt; postgres, como criar seu 1° usuário?
Qual a senha de root(postgres)? Qual a senha …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Confesso que logo de cara quando comecei a usar &lt;span class="caps"&gt;PSQL&lt;/span&gt; fiquei
meio perdido (usava MySQL), então estou escrevendo essa dica para eu&amp;nbsp;relembrar.&lt;/p&gt;
&lt;p&gt;Criando seu 1° super usuário no PostgreSQL.
Depois de instalado seu &lt;span class="caps"&gt;SGBD&lt;/span&gt; postgres, como criar seu 1° usuário?
Qual a senha de root(postgres)? Qual a senha&amp;nbsp;padrão?&lt;/p&gt;
&lt;p&gt;Esta dica é para iniciantes.
Simples, na máquina com o banco instalado siga os seguintes passos,
existem varias maneiras de fazer isso, e essa foi a maneira
mais&amp;nbsp;básica/simples que eu achei para&amp;nbsp;explicar.&lt;/p&gt;
&lt;p&gt;Logue-se como root, digite &amp;#8220;su root&amp;#8221; ou &amp;#8220;sudo -i&amp;#8221; ou &amp;#8220;sudo su&amp;#8221; (no
terminal a mensagem padrão deve terminar com #).
Entre como usuário postgres com o&amp;nbsp;comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~# su postgres
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Conecte ao Shell do postgres (por padrão você se conecta ao &lt;span class="caps"&gt;DB&lt;/span&gt; postgres)&amp;nbsp;comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ psql
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora deve aparecer uma frase de boas vindas (Bem vindo ao psql&amp;#8230;) e
você está no terminal do posgres, note que o shell mudou antes era
&lt;strong&gt;root&amp;#64;pc #&lt;/strong&gt; agora ficou &lt;strong&gt;postgres=#&lt;/strong&gt;
Isso quer dizer que agora&amp;nbsp;você&amp;nbsp;está no shell do PostgreSQL conectado
no banco &lt;em&gt;postgres&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Para criar nosso superuser, digite o&amp;nbsp;comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;USER&lt;/span&gt; &lt;span class="n"&gt;nomedousuario&lt;/span&gt; &lt;span class="n"&gt;SUPERUSER&lt;/span&gt; &lt;span class="k"&gt;INHERIT&lt;/span&gt; &lt;span class="n"&gt;CREATEDB&lt;/span&gt; &lt;span class="n"&gt;CREATEROLE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Depois temos que alterar a senha, então digite &amp;nbsp;o&amp;nbsp;comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="k"&gt;USER&lt;/span&gt; &lt;span class="n"&gt;nomedousuario&lt;/span&gt; &lt;span class="k"&gt;PASSWORD&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;senha&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Olha que maravilha! Super Usuário&amp;nbsp;criado.&lt;/p&gt;
&lt;p&gt;Comandos&amp;nbsp;básicos, para você que está acostumado com o golfinho, o Mamute
é&amp;nbsp;bem&amp;nbsp;diferente.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;psql&lt;/span&gt;
&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s s-Name"&gt;&amp;quot;Lista todos os bancos de dados.&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;nome&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;banco&lt;/span&gt;  &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s s-Name"&gt;&amp;quot;Conecta no banco *nome-banco*&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;  &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s s-Name"&gt;&amp;quot;Lista as tabelas do banco de dados conectado.&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;  &lt;span class="k"&gt;table&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s s-Name"&gt;&amp;quot;Descrimina as colunas da tabela.&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;dg&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s s-Name"&gt;&amp;quot;Lista usuários existentes, as permissões e grupos que o usuário pertence.&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="k"&gt;password&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;usuario&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s s-Name"&gt;&amp;quot;Troca a senha do usuário com segurança, ou seja você não vê a senha que foi digitada e não é possível ver através do histórico de comandos&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;  &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s s-Name"&gt;&amp;quot;Lista o conteúdo das tabelas. (o.O)&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Poderíamos usar essas opções da mesma forma, mas criando um usuário comum e colocando as permissões mais&amp;nbsp;restritivas.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;USER&lt;/span&gt; &lt;span class="n"&gt;jesuejunior&lt;/span&gt; &lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="k"&gt;PASSWORD&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;supersecret&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Para conceder a permissão de executar somente Update ou Select ou Insert ou Delete ou&amp;nbsp;Role(dono)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;GRANT&lt;/span&gt; &lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;nomedatabela&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;jesuejunior&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;GRANT&lt;/span&gt; &lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;nomedatabela&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;jesuejunior&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;GRANT&lt;/span&gt; &lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;nomedatabela&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;jesuejunior&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;GRANT&lt;/span&gt; &lt;span class="k"&gt;DELETE&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;nomedatabela&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;jesuejunior&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;GRANT&lt;/span&gt; &lt;span class="k"&gt;RULE&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;nomedatabela&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;jesuejunior&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E para dar permissão para fazer todas as&amp;nbsp;operações.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;GRANT&lt;/span&gt; &lt;span class="k"&gt;ALL&lt;/span&gt; &lt;span class="k"&gt;PRIVILEGES&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;nomedatabela&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;public&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Partindo do principio que você já está conectado com o usuário&amp;nbsp;postgres.&lt;/p&gt;
&lt;p&gt;Para apagar um&amp;nbsp;usuário:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="n"&gt;dropuser&lt;/span&gt; &lt;span class="n"&gt;jesuejunior&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Bom isso já me ajudou a ganhar muito tempo, e espero que ajude outras&amp;nbsp;pessoas.&lt;/p&gt;
&lt;p&gt;Em breve estarei postando sobre gerenciar&amp;nbsp;databases.&lt;/p&gt;
</content><category term="Banco de Dados"></category><category term="PostgreSQL"></category><category term="psql"></category><category term="postgre"></category><category term="usuario"></category><category term="gerenciar"></category><category term="aprender"></category><category term="db"></category></entry><entry><title>Ativando conexões remotas ao PostgreSQL</title><link href="jesuejunior.com/ativando-conexoes-remotas-postgresql" rel="alternate"></link><published>2012-07-06T22:19:00-03:00</published><updated>2012-07-06T22:19:00-03:00</updated><author><name>jesuejunior</name></author><id>tag:None,2012-07-06:jesuejunior.com/ativando-conexoes-remotas-postgresql</id><summary type="html">&lt;p&gt;Neste tópico vou &lt;em&gt;tentar&lt;/em&gt; explicar como liberar&amp;nbsp;conexões&amp;nbsp;remotas pela rede a uma base de dados PostgreSQL&amp;nbsp;(9.1).&lt;/p&gt;
&lt;p&gt;Por padrão o PostgreSQL vem configurado para receber apenas conexões locais (localhost ou 127.0.0.1). Para conectar de outra máquina
na&amp;nbsp;rede&amp;nbsp;é preciso alterar algumas configurações básicas em …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Neste tópico vou &lt;em&gt;tentar&lt;/em&gt; explicar como liberar&amp;nbsp;conexões&amp;nbsp;remotas pela rede a uma base de dados PostgreSQL&amp;nbsp;(9.1).&lt;/p&gt;
&lt;p&gt;Por padrão o PostgreSQL vem configurado para receber apenas conexões locais (localhost ou 127.0.0.1). Para conectar de outra máquina
na&amp;nbsp;rede&amp;nbsp;é preciso alterar algumas configurações básicas em 2&amp;nbsp;arquivos.&lt;/p&gt;
&lt;p&gt;(Linux)&lt;/p&gt;
&lt;p&gt;São eles:&amp;nbsp; &lt;strong&gt;postgresql.conf&lt;/strong&gt;&amp;nbsp;e&amp;nbsp;&lt;strong&gt;pg_hba.conf&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;No&amp;nbsp; &lt;strong&gt;postgresql.conf&lt;/strong&gt;&amp;nbsp;vamos editar a seguinte&amp;nbsp;linha:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#listen_addresses = ‘localhost’ # what IP address(es) to listen on&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Como em todo arquivo de configuração em programas linux, o # na frente
da linha significa um comentário e com isso desabilita o parâmetro
seguinte, tomando seu valor default, que no caso é localhost. Descomente
essa linha e substitua seu valor por *. Assim seu PostgreSQL estará
apto a ouvir conexões de qualquer &lt;span class="caps"&gt;IP&lt;/span&gt;.Então essa linha ficará da seguinte&amp;nbsp;forma:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;listen_addresses&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;# what IP address(es) to listen on&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Isso não quer dizer que ele estará aberto para qualquer &lt;span class="caps"&gt;IP&lt;/span&gt; da rede. É
possível criar políticas de&amp;nbsp;acesso&amp;nbsp;através de outro arquivo que
falaremos a&amp;nbsp;seguir.&lt;/p&gt;
&lt;p&gt;Liberando as conexões no arquivo&amp;nbsp;&lt;strong&gt;pg_hba.conf&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;Este é o arquivo do Postgres responsável pela liberação de usuários,
hosts e bancos de dados. Nele é possível dizer qual usuário de qual ip
(ou rede) conectará a qual banco. É possível liberar qualquer usuário
para conectar a qualquer banco, mas esta é uma regra cautelosa a ser
seguida pois pode comprometer a segurança do seu&amp;nbsp;servidor&amp;nbsp;de bases de&amp;nbsp;dados.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Por padrão o arquivo vem com a seguinte&amp;nbsp;configuração:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#“local” is for Unix domain socket connections only&lt;/span&gt;
&lt;span class="nb"&gt;local&lt;/span&gt; all all trust
&lt;span class="c1"&gt;# IPv4 local connections:&lt;/span&gt;
host all all &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1/32 trust
&lt;span class="c1"&gt;# IPv6 local connections:&lt;/span&gt;
host all all ::1/128 trust
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pode haver alguma variação das configurações padrões de acordo com a
versão utilizada, mas geralmente é algo que represente essas
informações. Basicamente elas querem dizer que todas as conexões locais
podem ser realizadas por qualquer usuário do banco a qualquer banco de&amp;nbsp;dados.&lt;/p&gt;
&lt;p&gt;Para liberar o acesso remoto basta criar uma nova regra seguindo o
seguinte&amp;nbsp;padrão:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host all all &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0/0 trust
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com essa regra qualquer usuário de qualquer &lt;span class="caps"&gt;IP&lt;/span&gt; poderá se conectar a
qualquer&amp;nbsp;database.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Importante&lt;/strong&gt;: O parâmetro trust quer dizer que não será solicitada
qualquer senha para conectar ao banco de dados. Então, qualquer pessoa
com acesso à sua rede poderá se conectar ao servidor PostgreSQL sem
nenhuma restrição. Se a sua rede for restrita como uma turma de um curso
ou um ambiente de desenvolvimento interno de empresa não há riscos,
porém, é necessário possuir um ambiente de rede interno&amp;nbsp;isolado.&lt;/p&gt;
&lt;p&gt;Este parâmetro é útil quando você ainda não se conectou ao banco para
criar uma senha de acesso ao usuário postgres (do banco e não do sistema
operacional). Então você se conecta e reseta a senha do usuário. Logo em
seguida, altere o parâmetro para md5. Assim, uma senha será solicitada
ao tentar conectar-se ao servidor&amp;nbsp;Postgre.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Assim ficará a regra de&amp;nbsp;liberação:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host all all &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0/0 md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;É possível também liberar o acesso apenas a uma rede&amp;nbsp;específica:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host all all &lt;span class="m"&gt;192&lt;/span&gt;.168.0.0/32 md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Ou também, informar qual usuário poderá&amp;nbsp;conectar:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host all usuariodobanco &lt;span class="m"&gt;192&lt;/span&gt;.168.0.0/32 md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Também informar qual o banco de dados a ser conectar por este&amp;nbsp;usuário:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;host db userdb &lt;span class="m"&gt;192&lt;/span&gt;.168.0.0/32 md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Na regra acima, o usuário&amp;nbsp;&lt;em&gt;userdb&lt;/em&gt; do banco &amp;nbsp;poderá conectar-se apenas
ao banco db apenas se estiver dentro da rede&amp;nbsp;192.168.0.0.&lt;/p&gt;
&lt;p&gt;Essa é a dica, precisei muito disso e quebrei a cabeça um pouco então
fica guardado agora, espero que possa&amp;nbsp;ajudar&amp;nbsp;alguém.&lt;/p&gt;
</content><category term="PostgreSQL"></category></entry><entry><title>Aprendendo a usar o GitHub (Primeiros passos)</title><link href="jesuejunior.com/aprendendo-github-primeiros-passos" rel="alternate"></link><published>2012-06-06T20:18:00-03:00</published><updated>2012-06-06T20:18:00-03:00</updated><author><name>jesuejunior</name></author><id>tag:None,2012-06-06:jesuejunior.com/aprendendo-github-primeiros-passos</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="https://github.com/"&gt;GitHub&lt;/a&gt; é uma rede social para&amp;nbsp;códigos, muito interessante,&amp;nbsp;você&amp;nbsp;consegue
guardar seus&amp;nbsp;códigos, conhecer outros devs, recebe ajuda em seus projetos, divulga os seus, entre outras coisas.
Me interessei sobre o assunto e uso hoje em dia, então resolvi escrever esse post, primeiro para não
esquecer e depois para …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="https://github.com/"&gt;GitHub&lt;/a&gt; é uma rede social para&amp;nbsp;códigos, muito interessante,&amp;nbsp;você&amp;nbsp;consegue
guardar seus&amp;nbsp;códigos, conhecer outros devs, recebe ajuda em seus projetos, divulga os seus, entre outras coisas.
Me interessei sobre o assunto e uso hoje em dia, então resolvi escrever esse post, primeiro para não
esquecer e depois para ajudar quem estiver começando e precisar ter uma ajuda para aprender sobre versionamento de código e guarda-los.
É possível guardar código de qualquer linguagem, com opções de repositórios publico(free) ou privados(pago),
no meu caso como é para aprendizagem e projetos pessoais não vejo problemas usar&amp;nbsp;publicamente.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1º Passo&lt;/strong&gt; é criar uma conta no &lt;a class="reference external" href="https://github.com/"&gt;GitHub&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2º Passo&lt;/strong&gt; é instalar o &lt;span class="caps"&gt;GIT&lt;/span&gt; em sua maquina Linux, que depende muito da sua&amp;nbsp;distribuição.&lt;/p&gt;
&lt;p&gt;Para baseados em&amp;nbsp;Debian/Ubuntu.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Para&amp;nbsp;Archlinux.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -S git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Para baseados em Red&amp;nbsp;Hat&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo yum install git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Configurar o cliente &lt;span class="caps"&gt;GIT&lt;/span&gt;, para vincular os commits para o autor&amp;nbsp;correto&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git config --global user.name &lt;span class="s2"&gt;&amp;quot;SEU NOME AQUI&amp;quot;&lt;/span&gt;
git config --global user.email email@gmail.com
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Para inicializar o repositório &lt;span class="caps"&gt;GIT&lt;/span&gt; vazio existe duas formas [1]&amp;nbsp;[2]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;*[1]*&lt;/strong&gt; - Executando o comando abaixo, que o git vai criar a pasta, caso ela não existir e inicializará como&amp;nbsp;repositório&amp;nbsp;&lt;span class="caps"&gt;GIT&lt;/span&gt;.&amp;nbsp;Ex:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git init python
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;[2] Criar a pasta e depois entrar na pasta e depois inicializar o repositório, ficaria&amp;nbsp;assim:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mkdir python
~$ &lt;span class="nb"&gt;cd&lt;/span&gt; python
~$ git init
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Entre em seu repositório e crie o arquivo &lt;span class="caps"&gt;README&lt;/span&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; python/
vim README
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Escreva um texto inicial, como por exemplo “First commit” e salve o arquivo&amp;nbsp;(:wq)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git status
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aparecerá a os dados conforme imagem abaixo, mas o que isso quer dizer?
Bom, a parte importante dessa tela é &lt;em&gt;Untracked files&lt;/em&gt; que mostra os arquivos que o &lt;span class="caps"&gt;GIT&lt;/span&gt;&amp;nbsp;ainda&amp;nbsp;não está gerenciando, ou seja, o &lt;span class="caps"&gt;GIT&lt;/span&gt; não sabe o
que fazer com ele e não registra nenhuma modificação no&amp;nbsp;arquivo.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://jesuejunior.com/aprendendo-github-primeiros-passos/gitstatus/"&gt;&lt;img alt="image1" src="/img/git/gitstatus.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Então temos que adicionar o(os) arquivo(os) que queremos que o &lt;span class="caps"&gt;GIT&lt;/span&gt; gerencie para&amp;nbsp;nos.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git add README
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Veremos agora o que mudou depois de mandar o &lt;span class="caps"&gt;GIT&lt;/span&gt; gerenciar nosso arquivo &lt;em&gt;&lt;span class="caps"&gt;README&lt;/span&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git status
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora percebemos que o status do nosso arquivo mudou de &lt;strong&gt;Untracked files&lt;/strong&gt; como na imagem anterior para &lt;strong&gt;Changes to be committed&lt;/strong&gt;,
isso quer dizer que a partir de agora o &lt;span class="caps"&gt;GIT&lt;/span&gt; vai gerenciar o nosso arquivo,&amp;nbsp;ele mostra que voce não fez o &lt;em&gt;commit&lt;/em&gt; para essa modificações entrarem em&amp;nbsp;vigor.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://jesuejunior.com/aprendendo-github-primeiros-passos/gitstatus2/"&gt;&lt;img alt="image2" src="/img/git/gitstatus2.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Fazendo o &lt;em&gt;commit&lt;/em&gt; existem duas maneiras para fazer isso. [3]&amp;nbsp;[4]&lt;/p&gt;
&lt;p&gt;[3] Podemos apenas digitar o comando e o nosso editor de textos padrão abrirá para voce poder escrever a mensagem que identificará o &lt;em&gt;commit&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git commit
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;[4] Podemos fazer tudo isso em apenas uma etapa da seguinte forma. O &lt;strong&gt;*-m*&lt;/strong&gt; informa para esperar a mensagem de &lt;em&gt;commit&lt;/em&gt; entre aspas por ser uma&amp;nbsp;string.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git commit -m &lt;span class="s1"&gt;&amp;#39;Adicionando arquivo README&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No fim se tudo ocorrer certo, será mostrada uma mensagem conforme&amp;nbsp;imagem.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://jesuejunior.com/aprendendo-github-primeiros-passos/gitcommit/"&gt;&lt;img alt="image3" src="/img/git/gitcommit.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Temos como ver o&amp;nbsp;histórico&amp;nbsp;de &lt;em&gt;commit,*existem&amp;nbsp;inúmeras&amp;nbsp;formas de customizar a&amp;nbsp;visualização&amp;nbsp;do&amp;nbsp;histórico, duas sugestões rápidas
**&lt;/em&gt;-n* &lt;em&gt;[5]*&lt;/em&gt; e o&amp;nbsp; &lt;strong&gt;*&amp;#8212;committer=&amp;lt;nomedocara&amp;gt;*&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[6]&lt;/strong&gt;, para saber todas as possibilidades pode utilizar o comando de ajuda &lt;em&gt;git log&amp;nbsp;&amp;#8212;help&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git log
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;[5]&lt;/strong&gt; - Limita o numero de linhas a ser&amp;nbsp;mostrado&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[6]&lt;/strong&gt; - Mostra apenas os &lt;em&gt;commits&lt;/em&gt; da pessoa que&amp;nbsp;você&amp;nbsp;precisa ver, muito&amp;nbsp;útil&amp;nbsp;para quando se tem mais de um dev fazendo &lt;em&gt;commit&lt;/em&gt;&amp;nbsp;no&amp;nbsp;mesmo&amp;nbsp;projeto.&lt;/p&gt;
&lt;p&gt;Agora vamos direcionar nosso&amp;nbsp;repositório&amp;nbsp;local &lt;span class="caps"&gt;GIT&lt;/span&gt; para nosso&amp;nbsp;repositório&amp;nbsp;remoto no GItHub, assim poder&amp;nbsp;desfrutar&amp;nbsp;dos recursos
que o github.com oferece, alem de ter nosso&amp;nbsp;código&amp;nbsp;guardado e exposto para receber ajuda e&amp;nbsp;etc.&lt;/p&gt;
&lt;p&gt;Onde&amp;nbsp; &lt;strong&gt;jesuejunior&lt;/strong&gt;&amp;nbsp;deve ser o nome de usuario que voce criou no site do github e&amp;nbsp; &lt;strong&gt;python&lt;/strong&gt;&amp;nbsp;é o&amp;nbsp;repositório&amp;nbsp;de
seu projeto criado, assim&amp;nbsp;você&amp;nbsp;estando dentro de seu&amp;nbsp;repositório&amp;nbsp;local ele vai direcionar seus arquivos&amp;nbsp;devidamente
commitados&amp;nbsp;através&amp;nbsp;do comando&amp;nbsp; &lt;em&gt;push&lt;/em&gt;&amp;nbsp;que veremos em&amp;nbsp;instantes.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git remote add origin git@github.com:jesuejunior/python
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Para ver seu repositório remoto, utilize o&amp;nbsp;comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git remote
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Se tem para adicionar tem que ter como remover, certo? Então para
remover um repositório remoto, voce precisa saber qual repositório voce
quer remover, após executar o comando &lt;em&gt;git remote&lt;/em&gt; temos o resultado
&lt;em&gt;origin&lt;/em&gt;, então para remover é simples, utilize o&amp;nbsp;comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git remote rm origin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pronto foi removido seu&amp;nbsp;repositório&amp;nbsp;remoto (redirecionamento para o&amp;nbsp;github).&lt;/p&gt;
&lt;p&gt;Ao tentar verificar seu&amp;nbsp;repositório, com o seguinte comando, voce
receberá uma menssagem de erro, pois não tem sua chave &lt;span class="caps"&gt;SSH&lt;/span&gt;/&lt;span class="caps"&gt;RSA&lt;/span&gt;&amp;nbsp;configurada.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git remote show origin
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Então vamos configura-la.&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Primeiro entre &amp;nbsp;na pasta onde fica gravado suas chaves &lt;span class="caps"&gt;SSH&lt;/span&gt; (rsa)&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;cd&lt;/span&gt; ~/.ssh/
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora vamos gerar sua chave &lt;span class="caps"&gt;SSH&lt;/span&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ssh-keygen -t rsa -b &lt;span class="m"&gt;2048&lt;/span&gt; -f github
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="http://jesuejunior.com/aprendendo-github-primeiros-passos/chave-rsa/"&gt;&lt;img alt="image4" src="/img/git/chave-rsa.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Vai pedir uma senha para sua chave por duas vezes, sugiro &lt;strong&gt;não&lt;/strong&gt;
colocar a mesma senha do site. Pronto sua chave foi gerada com&amp;nbsp;sucesso.&lt;/p&gt;
&lt;p&gt;Precisamos agora editar nosso arquivo &lt;em&gt;config&lt;/em&gt;&amp;nbsp; que deve conter o
seguinte&amp;nbsp;conteúdo.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;vim ~/.ssh/config
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Host github.com
Port &lt;span class="m"&gt;443&lt;/span&gt;
HostName ssh.github.com
IdentityFile ~/.ssh/github
User git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora copie o conteúdo do&amp;nbsp;github.pub&lt;/p&gt;
&lt;p&gt;Para exibir o&amp;nbsp;conteúdo&amp;nbsp;da chave em seu terminal execute o comando
abaixo, nada impede de abrir no seu editor de texto&amp;nbsp;preferido.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat ~/.ssh/github.pub
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Esse é o&amp;nbsp;conteúdo&amp;nbsp;que deve ser copiado para&amp;nbsp;&amp;nbsp;sua pagina do Github &amp;gt;
Account Settings &amp;gt; &lt;span class="caps"&gt;SSH&lt;/span&gt; Public Keys &amp;gt; Add &lt;span class="caps"&gt;SSH&lt;/span&gt; Key&lt;a class="reference external" href="http://jesuejunior.com/aprendendo-github-primeiros-passos/chave-rsa2/"&gt;&lt;img alt="image5" src="/img/git/chave-rsa2.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Vamos verificar se conseguimos acessar nosso repositório no GitHub.com e
ver se está redirecionado&amp;nbsp;corretamente.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git remote show origin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="http://.jesuejunior.com/aprendendo-github-primeiros-passos/remote-show/"&gt;&lt;img alt="image6" src="/img/git/remote-show.png" /&gt;&lt;/a&gt;Agora vamos fazer nosso primeiro envio de arquivos para o
GitHub&amp;nbsp;através&amp;nbsp;do&amp;nbsp;comando:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git push origin master
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A partir de agora sempre que fizer modificações nos arquivos,&amp;nbsp;você&amp;nbsp;segue
a&amp;nbsp;sequencia&amp;nbsp;de comandos &lt;em&gt;status&lt;/em&gt;,&amp;nbsp;&lt;em&gt;add, &amp;nbsp;commit e&amp;nbsp;push.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Para enviar as alterações para o repositório do GitHub a partir da
segunda vez, use&amp;nbsp;apenas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ git push
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Se este post te ajudou, comente, agradeça e se ainda &amp;nbsp;tem duvida entre
em&amp;nbsp;contato.&lt;/p&gt;
&lt;p&gt;Em breve estarei fazendo um post bem legal sobre como trabalhar com
&lt;strong&gt;*branch*&lt;/strong&gt; utilizando os comandos &lt;strong&gt;*rebase, merge*&lt;/strong&gt; entre&amp;nbsp;outros&lt;/p&gt;
</content><category term="Git"></category></entry></feed>