<!DOCTYPE html>
<html lang="pt">
<head>
          <title>Jesué Junior</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link type="text/css" rel="stylesheet" href="/theme/css/bootstrap.min.css" />
        <link type="text/css" rel="stylesheet" href="/theme/css/style.css" />
        <link type="text/css" rel="stylesheet" href="/theme/css/pygments.css" />
        <link href='http://fonts.googleapis.com/css?family=Gudea:400,700,400italic|Asap:400,700,400italic' rel='stylesheet' type='text/css'>



    <meta name="tags" content="Debian" />

</head>

<body>
    <div class="bg">
        <div class="wrap">
            <nav id="sidebar">
                <a href="/" id="logo"></a>
                <ul id="menu">
                    <li> <a class="menu-link" href="/pages/about.html">About</a></li>
                    <li> <a class="menu-link" href="/pages/projects.html">Projects</a></li>
                </ul>

                <div class="social">
                    <a target="_blank" href="https://twitter.com/jesuejunior" class="social-link twitter"></a>
                    <a target="_blank" href="http://www.linkedin.com/in/jesuejunior" class="social-link linkedin"></a>
                    <a target="_blank" href="https://plus.google.com/u/0/110593412520623457385/posts" class="social-link googleplus"></a>
                    <a target="_blank" href="https://github.com/jesuejunior" class="social-link github"></a>
                    <a target="_blank" href="https://delicious.com/jesuejunior" class="social-link delicious"></a>
                    <a class="social-link"></a>
                </div>
            </nav>
<div id="content" class="">
    <div class="block welcome">
      <header>
        <h2 class="entry-title">
          <a href="/administrar-servicos-no-debian/" rel="bookmark"
             title="Permalink to Administrar serviços no Debian/Ubuntu">Administrar serviços no&nbsp;Debian/Ubuntu</a></h2>
     
      </header>
      <div class="info">
        <abbr class="" title="2012-06-02T20:40:00-03:00">
          Sat 02 June 2012
        </abbr>
        <address class="vcard author">
          By               <a class="url fn" href="/author/jesuejunior.html">jesuejunior</a>
        </address>
      </div><!-- /.post-info -->
      <div class="">
        <p>Certa fez precisei gerenciar alguns serviços no Debian/Ubuntu
e percebi que havia esquecido, então recorri ao meu caderno highlander
que estão todas as minhas anotações da época que estava me preparando
para fazer a prova de certificação, então aqui vai a&nbsp;dica.</p>
<p>Onde nome do serviço é o nome do serviço que quer iniciar no boot
(apache2 por exemplo), <span class="caps">NN</span> é o número da sequencia na qual o serviço será
inicializado (por exemplo, 1, 10, 20 ou 99) e runlevel é em qual
runlevel deseja que este serviço seja inicializado (aqui você pode
colocar em todos os <em>runlevel</em> de boot ou em apenas o que desejar) e não
esqueça do ponto (<strong>.</strong>) no final do&nbsp;comando.</p>
<p>Administração dos serviços no boot,&nbsp;use:</p>
<div class="highlight"><pre>update-rc.d nome_do_serviço start NN runlevel runlevel
</pre></div>
<p>E esse aqui para os runlevel de saída (desligar ou reiniciar por&nbsp;exemplo):</p>
<div class="highlight"><pre>update-rc.d nome_do_serviço stop NN runlevel runlevel
</pre></div>
<p>Para retirar um serviço do boot o comando&nbsp;é:</p>
<div class="highlight"><pre>update-rc.d -f nome_do_serviço remove
</pre></div>
<p>Adicionado serviços na inicialização Para colocar um serviço na
inicialização do Linux podemos utilizar uma ferramenta chamada ntsysv,
porém é interessante saber como funciona executar esta tarefa manualmente.
Os serviços do Linux ficam no diretório /etc/rc.d/init.d. Na inicialização os serviços localizados no diretório
<strong>/etc/rc.d/rc[n].d</strong> são inicializados ou parados. O [n] é o número correspondente ao run level, ou seja, é só
adicionar um link do serviço para este diretório com a seguinte&nbsp;nomenclatura:</p>
<div class="highlight"><pre><span class="o">[</span>S¦K<span class="o">]</span>56<span class="o">[</span>nomedoserviço<span class="o">]</span>
</pre></div>
<p>Sendo: [<span class="caps">SN</span>]:
Isto quer dizer se o serviço ou programa deve ser iniciado ou&nbsp;não;</p>
<p><strong>S</strong>: start&nbsp;(iniciar);</p>
<p><strong>K</strong>: kill (matar,&nbsp;parar).</p>
<p><strong>56</strong>: É o número da fila em que ele deverá ser executado, se o
número for menor ele será executado antes que os outros serviços;
[nomedoserviço]: somente para identificação humana, não interfere em&nbsp;nada.</p>
<p>Pronto, para inicializar um script primeiro você copia este script
para o&nbsp;/etc/init.d:</p>
<div class="highlight"><pre><span class="c"># cp /root/rotina.sh /etc/init.d</span>
</pre></div>
<p>Depois crie um link simbólico para o diretório /etc/rc.d/rc.[n]d(para
qual run level você&nbsp;quiser):</p>
<div class="highlight"><pre><span class="c"># ln -s /etc/rc.d/init.d /etc/rd.c/rc3.d/S24rotina</span>
</pre></div>
<p>Pronto, na inicialização em run level 3 o script rotina será&nbsp;executado.</p>
<p>Outro método para fazer&nbsp;seria</p>
<div class="highlight"><pre><span class="c"># vim /etc/init.d/meuscript</span>
</pre></div>
<div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="nb">echo</span> <span class="s2">&quot;Olá mundo&quot;</span>
</pre></div>
<p>Agora é só dar a permissão para&nbsp;execução:</p>
<div class="highlight"><pre><span class="c"># chmod 755 /etc/init.d/meuscript</span>
</pre></div>
<p>Quase pronto, agora é só colocar para inicializar junto com o&nbsp;sistema:</p>
<div class="highlight"><pre><span class="c"># update-rc.d meuscript defaults</span>
</pre></div>
<p>Bom é isso ai, coisa simples mais que pode salvar&nbsp;vidas.</p>
<p><a class="reference external" href="http://blog.jesuejunior.com/wp-content/uploads/2012/06/debian_ferramentas.png">http://blog.jesuejunior.com/wp-content/uploads/2012/06/debian_ferramentas.png</a></p>

      </div><!-- /.entry-content -->
    </div>
</div>
            <b class="clear"></b>
        </div>
    </div>
    <footer>
        <div class="wrap">
            <span>Desenvolvido por JJ</span>
        </div>
    </footer>
<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-31167248-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>